<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ðŸŽ¬ AnimeWatch con AdBlock Inteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #0a0a0a;
      color: #fff;
      font-family: 'Inter', sans-serif;
    }
    h1 {
      font-weight: 700;
      color: #fff;
      text-shadow: 0 0 10px rgba(255,255,255,0.2);
    }
    .card {
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(255,255,255,0.1);
    }
    .card img {
      height: 160px;
      object-fit: cover;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }
    #viewer {
      background: #111;
      border-radius: 12px;
      overflow: hidden;
      display: none;
      position: relative;
    }
    iframe {
      width: 100%;
      height: 80vh;
      border: none;
      background: #111;
    }
    .back-btn {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <h1 class="text-center mb-4">ðŸŽ¬ AnimeWatch con AdBlock Inteligente</h1>
    <div id="siteList" class="row g-4"></div>

    <div id="viewer" class="mt-4">
      <button class="btn btn-outline-light btn-sm back-btn" onclick="volverAlListado()">â¬… Volver al listado</button>
      <div id="viewerContent" class="text-center py-5 text-light">
        <div class="spinner-border"></div>
        <p class="mt-3">Cargando sin anuncios...</p>
      </div>
    </div>
  </div>

  <script>
    const sites = [
      { name: "AnimeFLV", url: "https://www3.animeflv.net/", image: "https://i.imgur.com/PLxqXh2.jpeg" },
      { name: "PelisPlusHD", url: "https://pelisplushd.mx/", image: "https://i.imgur.com/VB7pZLZ.jpeg" },
      { name: "TioAnime", url: "https://tioanime.com/", image: "https://i.imgur.com/VB7pZLZ.jpeg" },
      { name: "EntrePeliculas", url: "https://entrepeliculasyseries.nz/", image: "https://i.imgur.com/LWjVTVr.jpeg" }
    ];

    const listContainer = document.getElementById("siteList");
    const viewer = document.getElementById("viewer");
    const viewerContent = document.getElementById("viewerContent");

    // Renderizar tarjetas
    sites.forEach(site => {
      listContainer.innerHTML += `
        <div class="col-md-4 col-lg-3">
          <div class="card bg-dark text-light text-center border-secondary h-100">
            <img src="${site.image}" class="card-img-top" alt="${site.name}">
            <div class="card-body">
              <h5 class="card-title mb-3">${site.name}</h5>
              <button class="btn btn-outline-light btn-sm" onclick="loadSite('${site.url}')">Ver sin anuncios ðŸš«</button>
            </div>
          </div>
        </div>
      `;
    });

    // Cargar sitio dentro del visor
    function loadSite(url) {
      document.getElementById("siteList").style.display = "none";
      viewer.style.display = "block";
      viewerContent.innerHTML = `
        <div class='text-center py-5 text-light'>
          <div class='spinner-border'></div>
          <p class='mt-3'>Cargando sin anuncios...</p>
        </div>
      `;
      const iframe = document.createElement("iframe");
      iframe.src = `/proxy?target=${encodeURIComponent(url)}`;
      iframe.onload = () => console.log(`âœ… Sitio cargado: ${url}`);
      viewerContent.innerHTML = "";
      viewerContent.appendChild(iframe);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // Volver al listado
    function volverAlListado() {
      viewer.style.display = "none";
      document.getElementById("siteList").style.display = "flex";
      viewerContent.innerHTML = "";
    }
  </script>
</body>
</html>